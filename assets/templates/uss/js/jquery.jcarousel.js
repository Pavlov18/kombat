!function(t){t.fn.jcarousel=function(i){if("string"==typeof i){var s=t(this).data("jcarousel"),l=Array.prototype.slice.call(arguments,1);return s[i].apply(s,l)}return this.each(function(){t(this).data("jcarousel",new n(this,i))})};var i={vertical:!1,rtl:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},s=!1;t(window).bind("load.jcarousel",function(){s=!0}),t.jcarousel=function(n,l){this.options=t.extend({},i,l||{}),this.locked=!1,this.container=null,this.clip=null,this.list=null,this.buttonNext=null,this.buttonPrev=null,l&&void 0!==l.rtl||(this.options.rtl="rtl"==(t(n).attr("dir")||t("html").attr("dir")||"").toLowerCase()),this.wh=this.options.vertical?"height":"width",this.lt=this.options.vertical?"top":this.options.rtl?"right":"left";for(var o="",a=n.className.split(" "),e=0;e<a.length;e++)if(-1!=a[e].indexOf("jcarousel-skin")){t(n).removeClass(a[e]),o=a[e];break}"UL"==n.nodeName.toUpperCase()||"OL"==n.nodeName.toUpperCase()?(this.list=t(n),this.container=this.list.parent(),this.container.hasClass("jcarousel-clip")?(this.container.parent().hasClass("jcarousel-container")||(this.container=this.container.wrap("<div></div>")),this.container=this.container.parent()):this.container.hasClass("jcarousel-container")||(this.container=this.list.wrap("<div></div>").parent())):(this.container=t(n),this.list=this.container.find("ul,ol").eq(0)),""!=o&&-1==this.container.parent()[0].className.indexOf("jcarousel-skin")&&this.container.wrap('<div class=" '+o+'"></div>'),this.clip=this.list.parent(),this.clip.length&&this.clip.hasClass("jcarousel-clip")||(this.clip=this.list.wrap("<div></div>").parent()),this.buttonNext=t(".jcarousel-next",this.container),0==this.buttonNext.size()&&null!=this.options.buttonNextHTML&&(this.buttonNext=this.clip.after(this.options.buttonNextHTML).next()),this.buttonNext.addClass(this.className("jcarousel-next")),this.buttonPrev=t(".jcarousel-prev",this.container),0==this.buttonPrev.size()&&null!=this.options.buttonPrevHTML&&(this.buttonPrev=this.clip.after(this.options.buttonPrevHTML).next()),this.buttonPrev.addClass(this.className("jcarousel-prev")),this.clip.addClass(this.className("jcarousel-clip")).css({overflow:"hidden",position:"relative"}),this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css(this.options.rtl?"right":"left",0),this.container.addClass(this.className("jcarousel-container")).css({position:"relative"}),!this.options.vertical&&this.options.rtl&&this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl");var h=null!=this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,r=this.list.children("li"),c=this;if(r.size()>0){var p=0,e=this.options.offset;r.each(function(){c.format(this,e++),p+=c.dimension(this,h)}),this.list.css(this.wh,p+100+"px"),l&&void 0!==l.size||(this.options.size=r.size())}this.container.css("display","block"),this.buttonNext.css("display","block"),this.buttonPrev.css("display","block"),this.funcNext=function(){c.next()},this.funcPrev=function(){c.prev()},this.funcResize=function(){c.reload()},null!=this.options.initCallback&&this.options.initCallback(this,"init"),!s&&t.browser.safari?(this.buttons(!1,!1),t(window).bind("load.jcarousel",function(){c.setup()})):this.setup()};var n=t.jcarousel;n.fn=n.prototype={jcarousel:"0.2.5"},n.fn.extend=n.extend=t.extend,n.fn.extend({setup:function(){if(this.first=null,this.last=null,this.prevFirst=null,this.prevLast=null,this.animating=!1,this.timer=null,this.tail=null,this.inTail=!1,!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var i=this.pos(this.options.start);this.prevFirst=this.prevLast=null,this.animate(i,!1),t(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize)}},reset:function(){this.list.empty(),this.list.css(this.lt,"0px"),this.list.css(this.wh,"10px"),null!=this.options.initCallback&&this.options.initCallback(this,"reset"),this.setup()},reload:function(){if(null!=this.tail&&this.inTail&&this.list.css(this.lt,n.intval(this.list.css(this.lt))+this.tail),this.tail=null,this.inTail=!1,null!=this.options.reloadCallback&&this.options.reloadCallback(this),null!=this.options.visible){var t=this,i=Math.ceil(this.clipping()/this.options.visible),s=0,l=0;this.list.children("li").each(function(n){s+=t.dimension(this,i),n+1<t.first&&(l=s)}),this.list.css(this.wh,s+"px"),this.list.css(this.lt,-l+"px")}this.scroll(this.first,!1)},lock:function(){this.locked=!0,this.buttons()},unlock:function(){this.locked=!1,this.buttons()},size:function(t){return void 0!=t&&(this.options.size=t,this.locked||this.buttons()),this.options.size},has:function(t,i){void 0!=i&&i||(i=t),null!==this.options.size&&i>this.options.size&&(i=this.options.size);for(var s=t;i>=s;s++){var n=this.get(s);if(!n.length||n.hasClass("jcarousel-item-placeholder"))return!1}return!0},get:function(i){return t(".jcarousel-item-"+i,this.list)},add:function(i,s){var l=this.get(i),o=0,a=t(s);if(0==l.length){for(var e,l=this.create(i),h=n.intval(i);e=this.get(--h);)if(0>=h||e.length){0>=h?this.list.prepend(l):e.after(l);break}}else o=this.dimension(l);"LI"==a.get(0).nodeName.toUpperCase()?(l.replaceWith(a),l=a):l.empty().append(s),this.format(l.removeClass(this.className("jcarousel-item-placeholder")),i);var r=null!=this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,c=this.dimension(l,r)-o;return i>0&&i<this.first&&this.list.css(this.lt,n.intval(this.list.css(this.lt))-c+"px"),this.list.css(this.wh,n.intval(this.list.css(this.wh))+c+"px"),l},remove:function(t){var i=this.get(t);if(i.length&&!(t>=this.first&&t<=this.last)){var s=this.dimension(i);t<this.first&&this.list.css(this.lt,n.intval(this.list.css(this.lt))+s+"px"),i.remove(),this.list.css(this.wh,n.intval(this.list.css(this.wh))-s+"px")}},next:function(){this.stopAuto(),null==this.tail||this.inTail?this.scroll("both"!=this.options.wrap&&"last"!=this.options.wrap||null==this.options.size||this.last!=this.options.size?this.first+this.options.scroll:1):this.scrollTail(!1)},prev:function(){this.stopAuto(),null!=this.tail&&this.inTail?this.scrollTail(!0):this.scroll("both"!=this.options.wrap&&"first"!=this.options.wrap||null==this.options.size||1!=this.first?this.first-this.options.scroll:this.options.size)},scrollTail:function(t){if(!this.locked&&!this.animating&&this.tail){var i=n.intval(this.list.css(this.lt));t?i+=this.tail:i-=this.tail,this.inTail=!t,this.prevFirst=this.first,this.prevLast=this.last,this.animate(i)}},scroll:function(t,i){this.locked||this.animating||this.animate(this.pos(t),i)},pos:function(t){var i=n.intval(this.list.css(this.lt));if(this.locked||this.animating)return i;"circular"!=this.options.wrap&&(t=1>t?1:this.options.size&&t>this.options.size?this.options.size:t);for(var s,l=this.first>t,o="circular"!=this.options.wrap&&this.first<=1?1:this.first,a=l?this.get(o):this.get(this.last),e=l?o:o-1,h=null,r=0,c=!1,p=0;l?--e>=t:++e<t;)h=this.get(e),c=!h.length,0==h.length&&(h=this.create(e).addClass(this.className("jcarousel-item-placeholder")),a[l?"before":"after"](h),null!=this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(0>=e||e>this.options.size)&&(s=this.get(this.index(e)),s.length&&(h=this.add(e,s.clone(!0))))),a=h,p=this.dimension(h),c&&(r+=p),null!=this.first&&("circular"==this.options.wrap||e>=1&&(null==this.options.size||e<=this.options.size))&&(i=l?i+p:i-p);for(var u=this.clipping(),f=[],d=0,e=t,v=0,a=this.get(t-1);++d;){h=this.get(e),c=!h.length,0==h.length&&(h=this.create(e).addClass(this.className("jcarousel-item-placeholder")),0==a.length?this.list.prepend(h):a[l?"before":"after"](h),null!=this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(0>=e||e>this.options.size)&&(s=this.get(this.index(e)),s.length&&(h=this.add(e,s.clone(!0))))),a=h;var p=this.dimension(h);if(0==p)throw new Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...");if("circular"!=this.options.wrap&&null!==this.options.size&&e>this.options.size?f.push(h):c&&(r+=p),v+=p,v>=u)break;e++}for(var m=0;m<f.length;m++)f[m].remove();r>0&&(this.list.css(this.wh,this.dimension(this.list)+r+"px"),l&&(i-=r,this.list.css(this.lt,n.intval(this.list.css(this.lt))-r+"px")));var b=t+d-1;if("circular"!=this.options.wrap&&this.options.size&&b>this.options.size&&(b=this.options.size),e>b)for(d=0,e=b,v=0;++d;){var h=this.get(e--);if(!h.length)break;if(v+=this.dimension(h),v>=u)break}var g=b-d+1;if("circular"!=this.options.wrap&&1>g&&(g=1),this.inTail&&l&&(i+=this.tail,this.inTail=!1),this.tail=null,"circular"!=this.options.wrap&&b==this.options.size&&b-d+1>=1){var k=n.margin(this.get(b),this.options.vertical?"marginBottom":"marginRight");v-k>u&&(this.tail=v-u-k)}for(;t-- >g;)i+=this.dimension(this.get(t));return this.prevFirst=this.first,this.prevLast=this.last,this.first=g,this.last=b,i},animate:function(t,i){if(!this.locked&&!this.animating){this.animating=!0;var s=this,n=function(){if(s.animating=!1,0==t&&s.list.css(s.lt,0),("circular"==s.options.wrap||"both"==s.options.wrap||"last"==s.options.wrap||null==s.options.size||s.last<s.options.size)&&s.startAuto(),s.buttons(),s.notify("onAfterAnimation"),"circular"==s.options.wrap&&null!==s.options.size)for(var i=s.prevFirst;i<=s.prevLast;i++)null===i||i>=s.first&&i<=s.last||!(1>i||i>s.options.size)||s.remove(i)};if(this.notify("onBeforeAnimation"),this.options.animation&&0!=i){var l=this.options.vertical?{top:t}:this.options.rtl?{right:t}:{left:t};this.list.animate(l,this.options.animation,this.options.easing,n)}else this.list.css(this.lt,t+"px"),n()}},startAuto:function(t){if(void 0!=t&&(this.options.auto=t),0==this.options.auto)return this.stopAuto();if(null==this.timer){var i=this;this.timer=setTimeout(function(){i.next()},1e3*this.options.auto)}},stopAuto:function(){null!=this.timer&&(clearTimeout(this.timer),this.timer=null)},buttons:function(t,i){if(void 0==t||null==t){var t=!this.locked&&0!==this.options.size&&(this.options.wrap&&"first"!=this.options.wrap||null==this.options.size||this.last<this.options.size);this.locked||this.options.wrap&&"first"!=this.options.wrap||null==this.options.size||!(this.last>=this.options.size)||(t=null!=this.tail&&!this.inTail)}if(void 0==i||null==i){var i=!this.locked&&0!==this.options.size&&(this.options.wrap&&"last"!=this.options.wrap||this.first>1);this.locked||this.options.wrap&&"last"!=this.options.wrap||null==this.options.size||1!=this.first||(i=null!=this.tail&&this.inTail)}var s=this;this.buttonNext[t?"bind":"unbind"](this.options.buttonNextEvent+".jcarousel",this.funcNext)[t?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",!t),this.buttonPrev[i?"bind":"unbind"](this.options.buttonPrevEvent+".jcarousel",this.funcPrev)[i?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",!i),null!=this.options.buttonNextCallback&&this.buttonNext.data("jcarouselstate")!=t&&this.buttonNext.each(function(){s.options.buttonNextCallback(s,this,t)}).data("jcarouselstate",t),null!=this.options.buttonPrevCallback&&this.buttonPrev.data("jcarouselstate")!=i&&this.buttonPrev.each(function(){s.options.buttonPrevCallback(s,this,i)}).data("jcarouselstate",i)},notify:function(t){var i=null==this.prevFirst?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",t,i),this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",t,i,this.first),this.callback("itemFirstOutCallback",t,i,this.prevFirst)),this.prevLast!==this.last&&(this.callback("itemLastInCallback",t,i,this.last),this.callback("itemLastOutCallback",t,i,this.prevLast)),this.callback("itemVisibleInCallback",t,i,this.first,this.last,this.prevFirst,this.prevLast),this.callback("itemVisibleOutCallback",t,i,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(i,s,n,l,o,a,e){if(void 0!=this.options[i]&&("object"==typeof this.options[i]||"onAfterAnimation"==s)){var h="object"==typeof this.options[i]?this.options[i][s]:this.options[i];if(t.isFunction(h)){var r=this;if(void 0===l)h(r,n,s);else if(void 0===o)this.get(l).each(function(){h(r,this,l,n,s)});else for(var c=l;o>=c;c++)null===c||c>=a&&e>=c||this.get(c).each(function(){h(r,this,c,n,s)})}}},create:function(t){return this.format("<li></li>",t)},format:function(i,s){for(var i=t(i),n=i.get(0).className.split(" "),l=0;l<n.length;l++)-1!=n[l].indexOf("jcarousel-")&&i.removeClass(n[l]);return i.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+s)).css({"float":this.options.rtl?"right":"left","list-style":"none"}).attr("jcarouselindex",s),i},className:function(t){return t+" "+t+(this.options.vertical?"-vertical":"-horizontal")},dimension:function(i,s){var l=void 0!=i.jquery?i[0]:i,o=this.options.vertical?(l.offsetHeight||n.intval(this.options.itemFallbackDimension))+n.margin(l,"marginTop")+n.margin(l,"marginBottom"):(l.offsetWidth||n.intval(this.options.itemFallbackDimension))+n.margin(l,"marginLeft")+n.margin(l,"marginRight");if(void 0==s||o==s)return o;var a=this.options.vertical?s-n.margin(l,"marginTop")-n.margin(l,"marginBottom"):s-n.margin(l,"marginLeft")-n.margin(l,"marginRight");return t(l).css(this.wh,a+"px"),this.dimension(l)},clipping:function(){return this.options.vertical?this.clip[0].offsetHeight-n.intval(this.clip.css("borderTopWidth"))-n.intval(this.clip.css("borderBottomWidth")):this.clip[0].offsetWidth-n.intval(this.clip.css("borderLeftWidth"))-n.intval(this.clip.css("borderRightWidth"))},index:function(t,i){return void 0==i&&(i=this.options.size),Math.round(((t-1)/i-Math.floor((t-1)/i))*i)+1}}),n.extend({defaults:function(s){return t.extend(i,s||{})},margin:function(i,s){if(!i)return 0;var l=void 0!=i.jquery?i[0]:i;if("marginRight"==s&&t.browser.safari){var o,a,e={display:"block","float":"none",width:"auto"};return t.swap(l,e,function(){o=l.offsetWidth}),e.marginRight=0,t.swap(l,e,function(){a=l.offsetWidth}),a-o}return n.intval(t.css(l,s))},intval:function(t){return t=parseInt(t),isNaN(t)?0:t}})}(jQuery);